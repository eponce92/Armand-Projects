<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CLIP Image Search</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJESURBVFhH7ZZNaBNBFMf/m2yT1KTQD7EqiCAUPIgHEVS8iKAH8SJeRKQXL4IXvXgQQQ+CePDgQQcSDiB4EQT2I4EFE/EBE1FZtmjSNJpvdHWeSJk0mu9mYZHPxB8Oy+2bem/fe7M4OkSRJ8B9DpWsHIpEIVFWFw+GALMvw+XwIBAKQJIkNZVmGqqpgjGE0GiGfz6NUKqFer6PZbKLT6aDb7YJzDkVR4HQ6wRiDJElwu91wuVzw+/0IhULw+/1otVqoVquo1WpotVrodDrodrtgYhg6nQ7iLZqmwev1wu12w+PxwOFwQNd1tNtttg0GA9TrdWSzWWQyGWSzWWSzWeTzeRQKBRSLRZRKJVQqFdRqNTQaDWiaBs45JEkCYwyMMTDGQCkFpRT9fh+6rqPf76PZbKJaraJcLqNcLqNSqaBer0PXdXDOB0FQSiGKIhRFgSzLUBQFiqLA6XSCUgpBECAIAkRRhCAIEEURoihCkiQIggBZlmG32yFJEmw2G2RZhs1mg81mg81mgyAIEAQBlFJQSgfBjEYjjEYjcM7R7/fR6/XQ7XbBOQfnHJxzcM7R6/XQ6/XQbrcxHA4xHA4xGo0wHo8xHo8xmUwwmUwwmUwwmUwwHo8xGo0wHA4xGAzQ7/fR6/XAOQfnHEQQBFBKYbfbYbfbIcsyJEmCKIoQBAGUUhBCQAghYIyBMQZKKSilA+EkEEJACBkIJ4EQMhBOwtTiZoQQEEIIGGMghICQvz/Hv4YQ8gOKRNqTJ8UkVgAAAABJRU5ErkJggg==">
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <!-- Masonry -->
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body>
    <div class="app-container">
      <div class="left-panel">
        <header class="app-header">
          <h1 class="app-title">CLIP Image Search</h1>
          <p class="text-muted">Find visually similar images using AI</p>
        </header>

        <div class="control-panel">
          <form id="searchForm">
            <div class="drop-zone mb-4" id="dropZone">
              <input type="file" id="queryImage" name="queryImage" accept="image/*" hidden>
              <i class="bi bi-cloud-upload"></i>
              <p class="mb-0">Drag and drop an image here or click to select</p>
            </div>

            <div class="preview-container" id="previewContainer">
              <img id="imagePreview" src="#" alt="Preview">
            </div>

            <div class="mb-4">
              <label for="folderPath" class="form-label">Folder to Search</label>
              <div class="input-group">
                <input type="text" class="form-control" id="folderPath" name="folderPath" 
                  placeholder="Select a folder to search" readonly required>
                <button class="btn btn-outline-primary" type="button" id="browseFolderBtn">
                  <i class="bi bi-folder2-open me-2"></i>Browse
                </button>
              </div>
            </div>

            <div class="filters">
              <div class="mb-4">
                <label for="minScore" class="form-label d-flex justify-content-between">
                  <span>Minimum Similarity Score</span>
                  <span id="minScoreValue" class="badge bg-primary">0.2</span>
                </label>
                <input type="range" class="form-range" id="minScore" min="0" max="1" step="0.05" value="0.2">
              </div>
              <div class="mb-3">
                <label for="batchSize" class="form-label">Processing Batch Size</label>
                <select class="form-select" id="batchSize">
                  <option value="16">Small (16 images)</option>
                  <option value="32" selected>Medium (32 images)</option>
                  <option value="64">Large (64 images)</option>
                </select>
              </div>
            </div>

            <button type="submit" class="btn btn-primary w-100">
              <i class="bi bi-search me-2"></i>Search Similar Images
            </button>
          </form>
        </div>
      </div>

      <div class="right-panel">
        <div class="gallery" id="gallery"></div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading">
      <div class="loading-content">
        <div class="spinner-border mb-3" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mb-0">Searching for similar images...</p>
      </div>
    </div>

    <!-- Image Modal -->
    <div class="image-modal" id="imageModal">
      <div class="modal-close" id="modalClose">
        <i class="bi bi-x-lg"></i>
      </div>
      <img id="modalImage" src="" alt="Full size image">
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="/static/script.js"></script>
  </body>
</html>
